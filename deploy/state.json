{
    "version": 3,
    "deployment": {
        "manifest": {
            "time": "2019-10-10T20:04:52.208334-07:00",
            "magic": "34bd659feb530efab079c898eb496cfabe7dfa512811185f24ff115b0263ccff",
            "version": "v1.2.0"
        },
        "secrets_providers": {
            "type": "service",
            "state": {
                "url": "https://api.pulumi.com",
                "owner": "davidbegin",
                "project": "morguebot",
                "stack": "dev"
            }
        },
        "resources": [
            {
                "urn": "urn:pulumi:dev::morguebot::pulumi:pulumi:Stack::morguebot-dev",
                "custom": false,
                "type": "pulumi:pulumi:Stack",
                "outputs": {
                    "bucket_name": "morgue-files-2944dfb"
                }
            },
            {
                "urn": "urn:pulumi:dev::morguebot::pulumi:providers:aws::default_1_5_0",
                "custom": true,
                "id": "fbfb8749-bb23-4d9a-9440-7907dd5a34d0",
                "type": "pulumi:providers:aws",
                "inputs": {
                    "region": "us-west-2",
                    "version": "1.5.0"
                },
                "outputs": {
                    "region": "us-west-2",
                    "version": "1.5.0"
                }
            },
            {
                "urn": "urn:pulumi:dev::morguebot::aws:s3/bucket:Bucket::morgue-files",
                "custom": true,
                "id": "morgue-files-2944dfb",
                "type": "aws:s3/bucket:Bucket",
                "inputs": {
                    "__defaults": [
                        "acl",
                        "bucket",
                        "forceDestroy"
                    ],
                    "acl": "private",
                    "bucket": "morgue-files-2944dfb",
                    "forceDestroy": false
                },
                "outputs": {
                    "accelerationStatus": "",
                    "acl": "private",
                    "arn": "arn:aws:s3:::morgue-files-2944dfb",
                    "bucket": "morgue-files-2944dfb",
                    "bucketDomainName": "morgue-files-2944dfb.s3.amazonaws.com",
                    "bucketRegionalDomainName": "morgue-files-2944dfb.s3.us-west-2.amazonaws.com",
                    "corsRules": [],
                    "forceDestroy": false,
                    "hostedZoneId": "Z3BJ6K6RIION7M",
                    "id": "morgue-files-2944dfb",
                    "lifecycleRules": [],
                    "loggings": [],
                    "region": "us-west-2",
                    "requestPayer": "BucketOwner",
                    "tags": {},
                    "versioning": {
                        "enabled": false,
                        "mfaDelete": false
                    }
                },
                "parent": "urn:pulumi:dev::morguebot::pulumi:pulumi:Stack::morguebot-dev",
                "provider": "urn:pulumi:dev::morguebot::pulumi:providers:aws::default_1_5_0::fbfb8749-bb23-4d9a-9440-7907dd5a34d0"
            },
            {
                "urn": "urn:pulumi:dev::morguebot::aws:iam/role:Role::lambdaRole",
                "custom": true,
                "id": "lambdaRole-e999bda",
                "type": "aws:iam/role:Role",
                "inputs": {
                    "__defaults": [
                        "forceDetachPolicies",
                        "maxSessionDuration",
                        "name",
                        "path"
                    ],
                    "assumeRolePolicy": "{\n        \"Version\": \"2012-10-17\",\n        \"Statement\": [\n            {\n                \"Action\": \"sts:AssumeRole\",\n                \"Principal\": {\n                    \"Service\": \"lambda.amazonaws.com\"\n                },\n                \"Effect\": \"Allow\",\n                \"Sid\": \"\"\n            }\n        ]\n    }",
                    "forceDetachPolicies": false,
                    "maxSessionDuration": 3600,
                    "name": "lambdaRole-e999bda",
                    "path": "/"
                },
                "outputs": {
                    "arn": "arn:aws:iam::851075464416:role/lambdaRole-e999bda",
                    "assumeRolePolicy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                    "createDate": "2019-10-11T01:17:13Z",
                    "description": "",
                    "forceDetachPolicies": false,
                    "id": "lambdaRole-e999bda",
                    "maxSessionDuration": 3600,
                    "name": "lambdaRole-e999bda",
                    "path": "/",
                    "tags": {},
                    "uniqueId": "AROA4MKAM7TQOYQDPGF7P"
                },
                "parent": "urn:pulumi:dev::morguebot::pulumi:pulumi:Stack::morguebot-dev",
                "provider": "urn:pulumi:dev::morguebot::pulumi:providers:aws::default_1_5_0::fbfb8749-bb23-4d9a-9440-7907dd5a34d0",
                "propertyDependencies": {
                    "assumeRolePolicy": null
                }
            },
            {
                "urn": "urn:pulumi:dev::morguebot::aws:iam/rolePolicy:RolePolicy::lambdaRolePolicy",
                "custom": true,
                "id": "lambdaRole-e999bda:lambdaRolePolicy-f77a902",
                "type": "aws:iam/rolePolicy:RolePolicy",
                "inputs": {
                    "__defaults": [
                        "name"
                    ],
                    "name": "lambdaRolePolicy-f77a902",
                    "policy": "{\n        \"Version\": \"2012-10-17\",\n        \"Statement\": [\n          {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogGroup\",\n                \"logs:CreateLogStream\",\n                \"logs:PutLogEvents\"\n            ],\n            \"Resource\": \"arn:aws:logs:*:*:*\"\n          },\n          {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::morgue-files-2944dfb\"\n          }\n        ]\n    }",
                    "role": "lambdaRole-e999bda"
                },
                "outputs": {
                    "id": "lambdaRole-e999bda:lambdaRolePolicy-f77a902",
                    "name": "lambdaRolePolicy-f77a902",
                    "policy": "{\n        \"Version\": \"2012-10-17\",\n        \"Statement\": [\n          {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"logs:CreateLogGroup\",\n                \"logs:CreateLogStream\",\n                \"logs:PutLogEvents\"\n            ],\n            \"Resource\": \"arn:aws:logs:*:*:*\"\n          },\n          {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::morgue-files-2944dfb\"\n          }\n        ]\n    }",
                    "role": "lambdaRole-e999bda"
                },
                "parent": "urn:pulumi:dev::morguebot::pulumi:pulumi:Stack::morguebot-dev",
                "dependencies": [
                    "urn:pulumi:dev::morguebot::aws:iam/role:Role::lambdaRole"
                ],
                "provider": "urn:pulumi:dev::morguebot::pulumi:providers:aws::default_1_5_0::fbfb8749-bb23-4d9a-9440-7907dd5a34d0",
                "propertyDependencies": {
                    "policy": null,
                    "role": [
                        "urn:pulumi:dev::morguebot::aws:iam/role:Role::lambdaRole"
                    ]
                }
            },
            {
                "urn": "urn:pulumi:dev::morguebot::aws:lambda/function:Function::morgue-saver",
                "custom": true,
                "id": "morgue-saver-903f370",
                "type": "aws:lambda/function:Function",
                "inputs": {
                    "__defaults": [
                        "memorySize",
                        "name",
                        "publish",
                        "reservedConcurrentExecutions"
                    ],
                    "code": "../build/handler2.zip",
                    "environment": {
                        "__defaults": [],
                        "variables": {
                            "MORGUE_BUCKETNAME": "morgue-files-2944dfb",
                            "__defaults": []
                        }
                    },
                    "handler": "lambda_handler.save_morgue",
                    "memorySize": 128,
                    "name": "morgue-saver-903f370",
                    "publish": false,
                    "reservedConcurrentExecutions": -1,
                    "role": "arn:aws:iam::851075464416:role/lambdaRole-e999bda",
                    "runtime": "python3.6",
                    "timeout": 200
                },
                "outputs": {
                    "arn": "arn:aws:lambda:us-west-2:851075464416:function:morgue-saver-903f370",
                    "code": "../build/handler2.zip",
                    "description": "",
                    "environment": {
                        "variables": {
                            "MORGUE_BUCKETNAME": "morgue-files-2944dfb"
                        }
                    },
                    "handler": "lambda_handler.save_morgue",
                    "id": "morgue-saver-903f370",
                    "invokeArn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:851075464416:function:morgue-saver-903f370/invocations",
                    "kmsKeyArn": "",
                    "lastModified": "2019-10-11T02:50:51.785+0000",
                    "layers": [],
                    "memorySize": 128,
                    "name": "morgue-saver-903f370",
                    "publish": false,
                    "qualifiedArn": "arn:aws:lambda:us-west-2:851075464416:function:morgue-saver-903f370:$LATEST",
                    "reservedConcurrentExecutions": -1,
                    "role": "arn:aws:iam::851075464416:role/lambdaRole-e999bda",
                    "runtime": "python3.6",
                    "sourceCodeHash": "vsStjUrCnVEDked/mhZu4KJPicudqngx8ozOGONb+O8=",
                    "sourceCodeSize": 24534868,
                    "tags": {},
                    "timeout": 200,
                    "tracingConfig": {
                        "mode": "PassThrough"
                    },
                    "version": "$LATEST"
                },
                "parent": "urn:pulumi:dev::morguebot::pulumi:pulumi:Stack::morguebot-dev",
                "dependencies": [
                    "urn:pulumi:dev::morguebot::aws:iam/role:Role::lambdaRole",
                    "urn:pulumi:dev::morguebot::aws:s3/bucket:Bucket::morgue-files"
                ],
                "provider": "urn:pulumi:dev::morguebot::pulumi:providers:aws::default_1_5_0::fbfb8749-bb23-4d9a-9440-7907dd5a34d0",
                "propertyDependencies": {
                    "code": null,
                    "environment": [
                        "urn:pulumi:dev::morguebot::aws:s3/bucket:Bucket::morgue-files"
                    ],
                    "handler": null,
                    "role": [
                        "urn:pulumi:dev::morguebot::aws:iam/role:Role::lambdaRole"
                    ],
                    "runtime": null,
                    "timeout": null
                }
            }
        ]
    }
}
